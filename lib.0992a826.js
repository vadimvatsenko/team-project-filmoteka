function e(e,t,a,o){Object.defineProperty(e,t,{get:a,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},i=a.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return o[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},a.parcelRequired7c6=i),i.register("kyEFX",(function(t,a){var o,n;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var i={};o=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)i[t[a]]=e[t[a]]},n=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"1MkFi":"lib.0992a826.js","9v6fF":"symbol-defs.77c8385e.svg","5UbS1":"index.5f402c17.css","bp6zS":"index.1ae8b825.js"}')),i("2YGUk"),i("2ix2C"),i("iyKJU"),i("kyRuT");var s=i("dSs1Y"),l=i("9B8F0");i("ffjl9");var c=i("2ix2C"),r=i("fb9GJ"),d=i("krGWQ");const u=localStorage.getItem("id-user");function m(){const e={totalItems:u?JSON.parse(localStorage.getItem("WatchedFb")):JSON.parse(localStorage.getItem("watched")).watched.length,itemsPerPage:20,visiblePages:window.screen.width<=400?2:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}};new(t(r))("pagination",e).on("afterMove",(async function(e){v(),q("watched",e.page),window.scrollTo({top:0,behavior:"smooth"})})),f(),e.totalItems<=20&&p()}function g(){const e={totalItems:u?JSON.parse(localStorage.getItem("QueueFb")):JSON.parse(localStorage.getItem("watched")).queue.length,itemsPerPage:20,visiblePages:window.screen.width<=400?2:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}};new(t(r))("pagination",e).on("afterMove",(async function(e){v(),q("queue",e.page),window.scrollTo({top:0,behavior:"smooth"})})),f(),e.totalItems<=20&&p()}function p(){document.querySelector("#pagination").classList.add("visually-hidden")}function f(){document.querySelector("#pagination").classList.remove("visually-hidden")}function v(){d.refs.list.innerHTML=""}s=i("dSs1Y");const h=document.querySelector(".movie-list"),w=document.querySelector(".movie-popular-lib"),b=document.querySelector(".bacground-lib"),y=document.querySelector(".button-watched"),_=document.querySelector(".button-queue");y.addEventListener("click",M),_.addEventListener("click",T);const L=localStorage.getItem("id-user");let S=[],H=[];async function M(){let e;if(q("watched",1),m(),L)try{e=await(0,c.getWatchedFb)(L),0===e.length?(h.innerHTML="",w.classList.add("non-display"),b.classList.remove("non-display")):(w.classList.remove("non-display"),b.classList.add("non-display")),y.classList.add("button--lib-active"),_.classList.remove("button--lib-active"),y.dataset.active=!0,_.dataset.active=!1}catch(e){console.log(e)}else e=JSON.parse(localStorage.getItem("watched")).watched,0===e.length?(h.innerHTML="",w.classList.add("non-display"),b.classList.remove("non-display")):(w.classList.remove("non-display"),b.classList.add("non-display")),y.classList.add("button--lib-active"),_.classList.remove("button--lib-active"),y.dataset.active=!0,_.dataset.active=!1}async function T(){let e;if(q("queue",1),g(),L)try{e=await(0,c.getQueueFb)(L),0===e.length?(h.innerHTML="",w.classList.add("non-display"),b.classList.remove("non-display")):(w.classList.remove("non-display"),b.classList.add("non-display")),_.classList.add("button--lib-active"),y.classList.remove("button--lib-active"),_.dataset.active=!0,y.dataset.active=!1}catch(e){console.log(e)}else e=JSON.parse(localStorage.getItem("watched")).queue,0===e.length?(h.innerHTML="",w.classList.add("non-display"),b.classList.remove("non-display")):(w.classList.remove("non-display"),b.classList.add("non-display")),_.classList.add("button--lib-active"),y.classList.remove("button--lib-active"),_.dataset.active=!0,y.dataset.active=!1}async function q(e,t){let a;if(L)try{a="watched"===e?await(0,c.getWatchedFb)(L):await(0,c.getQueueFb)(L);let o=20*t-20;const n=20*t;1===t&&(o=0);const i=a.slice(o,n).join("");h.innerHTML=i}catch(e){console.log(e)}else{a=JSON.parse(localStorage.getItem("watched"))[e];let o=20*t-20;const n=20*t;1===t&&(o=0);const i=a.slice(o,n).join("");h.innerHTML=i}}!async function(){if(L)try{s.Loading.custom("Loading...",{customSvgCode:'<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><linearGradient id="myG"  fy="0" gradientTransform="rotate(60 .5 .5)"><stop offset="0" stop-color="#f15361"></stop><stop offset=".25" stop-color="#ffffff"><animate attributeName="offset" dur="2s" values="0;1;0"repeatCount="indefinite" /></stop><stop offset="1" stop-color="#f15361"/></linearGradient><path d="M0 0V12H16V0H0ZM3 11H1V9H3V11ZM3 7H1V5H3V7ZM3 3H1V1H3V3ZM12 11H4V1H12V11ZM15 11H13V9H15V11ZM15 7H13V5H15V7ZM15 3H13V1H15V3ZM6 3V9L10 6L6 3Z" fill="url(#myG)"/></svg>',backgroundColor:"rgba(0, 0, 0, 0.8)"}),H=await(0,c.getWatchedFb)(L),S=await(0,c.getQueueFb)(L),0===H.length?T():M(),s.Loading.remove(2e3)}catch(e){s.Loading.remove(2e3),console.log(e)}else H=JSON.parse(localStorage.getItem("watched")).watched,S=JSON.parse(localStorage.getItem("watched")).queue,0===H.length?T():M()}();var V;V=new URL(i("kyEFX").resolve("9v6fF"),import.meta.url).toString();c=i("2ix2C");var I=i("58den"),N=i("5XRb5");const F=new(0,I.Api),O=new(0,N.default)(".modal-movie__backdrop",".modal-movie__btn-close"),x=document.querySelector(".modal-movie__container"),Z=document.querySelector(".movie-list"),k=localStorage.getItem("id-user");let J={watched:[],queue:[]};function C(e,t,a){e.includes(t)?E(a):$(a)}function E(e){e.classList.add("modal-movie__btn--curent"),e.dataset.ls="true"}function $(e){e.classList.remove("modal-movie__btn--curent"),e.dataset.ls="false"}function W(e){"false"===e.dataset.ls?e.innerHTML="add to Watched":e.innerHTML="remove from Watched"}function Q(e){"false"===e.dataset.ls?e.innerHTML="add to Queue":e.innerHTML="remove from Queue"}function G(){const e=document.querySelector(".button-watched"),t=document.querySelector(".button-queue");"true"===e.dataset.active&&M(),"true"===t.dataset.active&&T()}!async function(){if(k)try{J.watched=await(0,c.getWatchedFb)(k),J.queue=await(0,c.getQueueFb)(k)}catch(e){console.log(e)}else localStorage.getItem("watched")?J=JSON.parse(localStorage.getItem("watched")):localStorage.setItem("watched",JSON.stringify(J))}(),Z.addEventListener("click",(async function(e){if(e.preventDefault(),"LI"!==e.target.nodeName)return;s.Loading.custom("Loading...",{customSvgCode:'<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><linearGradient id="myG"  fy="0" gradientTransform="rotate(60 .5 .5)"><stop offset="0" stop-color="#f15361"></stop><stop offset=".25" stop-color="#ffffff"><animate attributeName="offset" dur="2s" values="0;1;0"repeatCount="indefinite" /></stop><stop offset="1" stop-color="#f15361"/></linearGradient><path d="M0 0V12H16V0H0ZM3 11H1V9H3V11ZM3 7H1V5H3V7ZM3 3H1V1H3V3ZM12 11H4V1H12V11ZM15 11H13V9H15V11ZM15 7H13V5H15V7ZM15 3H13V1H15V3ZM6 3V9L10 6L6 3Z" fill="url(#myG)"/></svg>'}),x.innerHTML=" ",O.openModal();const a=e.target.dataset.id;try{const n=await F.fetchCardFilm(a);console.log(n),x.innerHTML=function(e){const t=[];return e.genres.length&&e.genres.map((e=>{t.push(e.name)})),`\n  <div class="modal-movie__img-container">\n  <img class="modal-movie__img" loading="lazy" src="${e.poster_path?"https://image.tmdb.org/t/p/w500"+e.poster_path:"https://i.postimg.cc/6pzyh7Wc/pngwing-com.png"}" alt="${e.original_title||e.original_name}" width="240" height="357" />\n  ${e.production_companies.length?e.production_companies[0].logo_path?` <img class="modal-movie__img-company" loading="lazy" src="${e.production_companies[0].logo_path?"https://image.tmdb.org/t/p/w500"+e.production_companies[0].logo_path:"-"}" alt="${e.production_companies[0].name||"logo company"}" width="240" height="357" />`:"":" "}\n  \n  </div>\n    \n    <div>\n      <h1 class="modal-movie__title">${e.original_title||e.original_name?e.original_title||e.original_name:"-"}</h1>\n      <ul class="modal-movie__list">\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Vote / Votes</p>\n          <p class="modal-movie__item-inf">\n            <span class="modal-movie__item-vote">${e.vote_average}</span> /\n            <span class="modal-movie__item-votes">${e.vote_count}</span>\n          </p>\n        </li>\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Popularity</p>\n          <p class="modal-movie__item-inf">${e.popularity}</p>\n        </li>\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Original Title </p>\n          <p class="modal-movie__item-inf modal-movie__item-inf--uppercase">\n            ${e.original_title}\n          </p>\n        </li>\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Genre</p>\n          <p class="modal-movie__item-inf">${t.length>0?t.join(", "):"-"}</p>\n        </li>\n      </ul>\n      <h2 class="modal-movie__about">About</h2>\n      <p class="modal-movie__about-text">\n        ${e.overview.length>0?e.overview:"Absent..."}\n      </p>\n      <div class="modal-movie__btn-section">\n        <button\n            class="modal-movie__btn modal-movie__btn--margin modal-movie__btn-watched"\n            type="button" data-ls='false'\n          >\n            add to Watched\n          </button>\n          <button class="modal-movie__btn modal-movie__btn-queue" type="button" data-ls='false'>add to queue</button>\n      </div>\n    </div>\n      `}(n),async function(e){const t=e.target.outerHTML,a=document.querySelector(".modal-movie__btn-watched"),o=document.querySelector(".modal-movie__btn-queue");a.addEventListener("click",function(e,t){return async function(){const a=document.querySelector(".modal-movie__btn-queue");if("false"===t.dataset.ls)if(k)try{await(0,c.addToWatchedFb)(k,e.target.outerHTML),E(t),G()}catch(e){console.log(e)}else J.watched.push(e.target.outerHTML),localStorage.setItem("watched",JSON.stringify(J)),E(t),G();else if(k)try{await(0,c.removeFromWatchedFb)(k,e.target.outerHTML),$(t),G()}catch(e){console.log(e)}else{const a=J.watched.indexOf(e.target.outerHTML);J.watched.splice(a,1),localStorage.setItem("watched",JSON.stringify(J)),$(t),G()}if(k)try{(await(0,c.getQueueFb)(k)).includes(e.target.outerHTML)&&(await(0,c.removeFromQueueFb)(k,e.target.outerHTML),$(a),G())}catch(e){console.log(e)}else if(JSON.parse(localStorage.getItem("watched")).queue.includes(e.target.outerHTML)){const t=J.queue.indexOf(e.target.outerHTML);J.queue.splice(t,1),localStorage.setItem("watched",JSON.stringify(J)),$(a),G()}W(t),a.innerHTML="add to Queue"}}(e,a)),o.addEventListener("click",function(e,t){return async function(){try{const a=document.querySelector(".modal-movie__btn-watched");if("false"===t.dataset.ls)if(k)try{await(0,c.addToQueueFb)(k,e.target.outerHTML),E(t),G()}catch(e){console.log(e)}else J.queue.push(e.target.outerHTML),localStorage.setItem("watched",JSON.stringify(J)),E(t),G();else if(k)try{await(0,c.removeFromQueueFb)(k,e.target.outerHTML),$(t),G()}catch(e){console.log(e)}else{const a=J.queue.indexOf(e.target.outerHTML);J.queue.splice(a,1),localStorage.setItem("watched",JSON.stringify(J)),$(t),G()}if(k)try{(await(0,c.getWatchedFb)(k)).includes(e.target.outerHTML)&&(await(0,c.removeFromWatchedFb)(k,e.target.outerHTML),$(a),G())}catch(e){console.log(e)}else if(JSON.parse(localStorage.getItem("watched")).watched.includes(e.target.outerHTML)){const t=J.watched.indexOf(e.target.outerHTML);J.watched.splice(t,1),localStorage.setItem("watched",JSON.stringify(J)),$(a),G()}Q(t),a.innerHTML="add to Watched"}catch{}}}(e,o));let n=[],i=[];try{k?(n=await(0,c.getWatchedFb)(k),i=await(0,c.getQueueFb)(k)):(n=JSON.parse(localStorage.getItem("watched")).watched,i=JSON.parse(localStorage.getItem("watched")).queue),C(n,t,a),C(i,t,o),W(a),Q(o)}catch(e){console.log(e),n=JSON.parse(localStorage.getItem("watched")).watched,i=JSON.parse(localStorage.getItem("watched")).queue,C(n,t,a),C(i,t,o),W(a),Q(o)}}(e),s.Loading.remove(0);try{const e=await F.fetchMovies(a);if(e.results[0]){document.querySelector(".modal-movie__img-container").insertAdjacentHTML("beforeend",`\n      <button type="button" class="modal-movie__movie">\n      <svg class="icon modal-movie__icon" width="40" height="40">\n      <use xlink:href="${t(V)}#icon-youtube"></use>\n      </svg>\n    </button>  \n      `);document.querySelector(".modal-movie__movie").addEventListener("click",(o=e.results[0],async function(){const e={className:"basicLightbox__placeholder--transparent",onShow:()=>{window.addEventListener("keydown",a)},onClose:()=>{window.removeEventListener("keydown",a),document.querySelector(".basicLightbox__placeholder").classList.remove("basicLightbox__placeholder--transparent")}},t=l.create(function(e){return`\n  <div class='movie-iframe'>\n<iframe frameborder="0" allowfullscreen="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" title="${e.name}" width="100%" height="100%" src="https://www.youtube.com/embed/${e.key}"></iframe>\n  </div>\n  `}(o),e);function a(e){"Escape"===e.code&&t.close()}t.show()}))}}catch(e){console.log(e),console.log("no movie")}}catch(e){s.Loading.remove(0),console.log(e),x.innerHTML=function(e){return`\n    <div class="error-message">\n    <h1>${e.response.status}</h1>\n    <h2>${e.name}</h2>\n    <h3>${e.message}</h3>\n<p>try later</p>\n    </div>\n    \n      `}(e)}var o})),i("hR8LQ");d=i("krGWQ"),N=i("5XRb5"),c=i("2ix2C");var B,A=i("eWCmQ");A=i("eWCmQ");const R=new(0,N.default)(".wrapper-modal-user",".modal-user__btn-close"),P=localStorage.getItem("email-user");P&&(d.refs.loginBtn.innerHTML=P),null===(B=d.refs.loginBtn)||void 0===B||B.addEventListener("click",(async function(){const e={wrap:document.querySelector(".sign-out__wrap"),register:document.querySelector(".modal-register"),email:document.querySelector(".account-info__email"),watched:document.querySelector(".account-info__count-watched"),queue:document.querySelector(".account-info__count-queue")},t=localStorage.getItem("email-user");if(t){const a=localStorage.getItem("id-user");try{A.Loading.custom("Loading...",{customSvgCode:'<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><linearGradient id="myG"  fy="0" gradientTransform="rotate(60 .5 .5)"><stop offset="0" stop-color="#f15361"></stop><stop offset=".25" stop-color="#ffffff"><animate attributeName="offset" dur="2s" values="0;1;0"repeatCount="indefinite" /></stop><stop offset="1" stop-color="#f15361"/></linearGradient><path d="M0 0V12H16V0H0ZM3 11H1V9H3V11ZM3 7H1V5H3V7ZM3 3H1V1H3V3ZM12 11H4V1H12V11ZM15 11H13V9H15V11ZM15 7H13V5H15V7ZM15 3H13V1H15V3ZM6 3V9L10 6L6 3Z" fill="url(#myG)"/></svg>',backgroundColor:"rgba(0, 0, 0, 0.8)"});const o=await(0,c.getUserInfo)(a);A.Loading.remove(100),R.openModal(),e.wrap.classList.remove("visually-hidden"),e.register.classList.add("visually-hidden"),e.email.innerHTML=`Your email: <b>${t}</b>`,e.watched.innerHTML=`You watched: <b>${o.watched.length}</b> films!`,e.queue.innerHTML=`You added to queue: <b>${o.queue.length}</b> films!`}catch(e){console.log(e)}}else R.openModal()}));const j=document.querySelector(".modal-register");null==j||j.addEventListener("click",(async function(e){e.preventDefault();const t={email:e.currentTarget["email-reg"].value,password:e.currentTarget["password-reg"].value},a=e.path[0].name;if("btn-auth"===a)try{Y((await(0,c.singInAccount)(t.email,t.password)).user.uid,t.email),A.Notify.success("Welcome back!"),setTimeout((()=>{location.reload()}),1e3)}catch(e){console.log(e)}else if("btn-reg"===a)try{const e=await(0,c.createUser)(t.email,t.password);Y(e.user.uid,t.email),(0,c.createNewUser)({id:e.user.uid,email:t.email}),A.Notify.success(`Succes! Your email: ${t.email}`),setTimeout((()=>{location.reload()}),1e3)}catch(e){console.log(e)}}));const U=document.querySelector(".sign-out__button");function Y(e,t){localStorage.setItem("id-user",e),localStorage.setItem("email-user",t),d.refs.loginBtn.innerHTML=t,R.modal.classList.add("is-hidden"),document.body.classList.remove("body--hidden")}null==U||U.addEventListener("click",(e=>{localStorage.removeItem("id-user"),localStorage.removeItem("email-user"),location.reload()}));
//# sourceMappingURL=lib.0992a826.js.map
