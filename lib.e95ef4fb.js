!function(){function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=a.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){o[e]=t},a.parcelRequired7c6=r),r.register("iE7OH",(function(t,a){var n,o;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var r={};n=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)r[t[a]]=e[t[a]]},o=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r.register("aNJCr",(function(t,a){var n;e(t.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var o={};function r(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return r(e[2])}return"/"}(),o[e]=t),t}})),r("iE7OH").register(JSON.parse('{"N9b3R":"lib.e95ef4fb.js","kxKJ3":"symbol-defs.77c8385e.svg","5UbS1":"index.5f402c17.css","k8Gra":"index.9cd2ba6e.js"}')),r("j1Fxp"),r("iNWLi"),r("fj1h0"),r("diaKp");var s=r("bpxeT"),c=r("2TvXO"),i=r("7rQOT"),l=r("dyT35");s=r("bpxeT"),c=r("2TvXO");r("2xDiJ");var u=r("iNWLi"),d=(s=r("bpxeT"),c=r("2TvXO"),r("1VFfL")),p=r("4Nugj"),m=localStorage.getItem("id-user");function g(){var e,a={totalItems:m?JSON.parse(localStorage.getItem("WatchedFb")):JSON.parse(localStorage.getItem("watched")).watched.length,itemsPerPage:20,visiblePages:window.screen.width<=400?2:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}};new(t(d))("pagination",a).on("afterMove",(e=t(s)(t(c).mark((function e(a){return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(),N("watched",a.page),window.scrollTo({top:0,behavior:"smooth"});case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})),h(),a.totalItems<=20&&v()}function f(){var e,a={totalItems:m?JSON.parse(localStorage.getItem("QueueFb")):JSON.parse(localStorage.getItem("watched")).queue.length,itemsPerPage:20,visiblePages:window.screen.width<=400?2:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}};new(t(d))("pagination",a).on("afterMove",(e=t(s)(t(c).mark((function e(a){return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(),N("queue",a.page),window.scrollTo({top:0,behavior:"smooth"});case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})),h(),a.totalItems<=20&&v()}function v(){document.querySelector("#pagination").classList.add("visually-hidden")}function h(){document.querySelector("#pagination").classList.remove("visually-hidden")}function b(){p.refs.list.innerHTML=""}i=r("7rQOT");var w=document.querySelector(".movie-list"),_=document.querySelector(".movie-popular-lib"),x=document.querySelector(".bacground-lib"),y=document.querySelector(".button-watched"),L=document.querySelector(".button-queue");y.addEventListener("click",M),L.addEventListener("click",V);var H=localStorage.getItem("id-user"),S=[];function k(){return(k=t(s)(t(c).mark((function e(){return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=19;break}return e.prev=1,i.Loading.custom("Loading...",{customSvgCode:'<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><linearGradient id="myG"  fy="0" gradientTransform="rotate(60 .5 .5)"><stop offset="0" stop-color="#f15361"></stop><stop offset=".25" stop-color="#ffffff"><animate attributeName="offset" dur="2s" values="0;1;0"repeatCount="indefinite" /></stop><stop offset="1" stop-color="#f15361"/></linearGradient><path d="M0 0V12H16V0H0ZM3 11H1V9H3V11ZM3 7H1V5H3V7ZM3 3H1V1H3V3ZM12 11H4V1H12V11ZM15 11H13V9H15V11ZM15 7H13V5H15V7ZM15 3H13V1H15V3ZM6 3V9L10 6L6 3Z" fill="url(#myG)"/></svg>',backgroundColor:"rgba(0, 0, 0, 0.8)"}),e.next=5,(0,u.getWatchedFb)(H);case 5:return S=e.sent,e.next=8,(0,u.getQueueFb)(H);case 8:e.sent,0===S.length?V():M(),i.Loading.remove(2e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),i.Loading.remove(2e3),console.log(e.t0);case 17:e.next=20;break;case 19:S=JSON.parse(localStorage.getItem("watched")).watched,JSON.parse(localStorage.getItem("watched")).queue,0===S.length?V():M();case 20:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function M(){return T.apply(this,arguments)}function T(){return(T=t(s)(t(c).mark((function e(){return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N("watched",1),g(),!H){e.next=20;break}return e.prev=4,e.next=7,(0,u.getWatchedFb)(H);case 7:0===e.sent.length?(w.innerHTML="",_.classList.add("non-display"),x.classList.remove("non-display")):(_.classList.remove("non-display"),x.classList.add("non-display")),y.classList.add("button--lib-active"),L.classList.remove("button--lib-active"),y.dataset.active=!0,L.dataset.active=!1,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:e.next=21;break;case 20:0===JSON.parse(localStorage.getItem("watched")).watched.length?(w.innerHTML="",_.classList.add("non-display"),x.classList.remove("non-display")):(_.classList.remove("non-display"),x.classList.add("non-display")),y.classList.add("button--lib-active"),L.classList.remove("button--lib-active"),y.dataset.active=!0,L.dataset.active=!1;case 21:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}function V(){return q.apply(this,arguments)}function q(){return(q=t(s)(t(c).mark((function e(){return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N("queue",1),f(),!H){e.next=20;break}return e.prev=4,e.next=7,(0,u.getQueueFb)(H);case 7:0===e.sent.length?(w.innerHTML="",_.classList.add("non-display"),x.classList.remove("non-display")):(_.classList.remove("non-display"),x.classList.add("non-display")),L.classList.add("button--lib-active"),y.classList.remove("button--lib-active"),L.dataset.active=!0,y.dataset.active=!1,e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:e.next=21;break;case 20:0===JSON.parse(localStorage.getItem("watched")).queue.length?(w.innerHTML="",_.classList.add("non-display"),x.classList.remove("non-display")):(_.classList.remove("non-display"),x.classList.add("non-display")),L.classList.add("button--lib-active"),y.classList.remove("button--lib-active"),L.dataset.active=!0,y.dataset.active=!1;case 21:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}function N(e,t){return I.apply(this,arguments)}function I(){return(I=t(s)(t(c).mark((function e(a,n){var o,r,s,i,l,d,p;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=24;break}if(e.prev=2,"watched"!==a){e.next=9;break}return e.next=6,(0,u.getWatchedFb)(H);case 6:o=e.sent,e.next=12;break;case 9:return e.next=11,(0,u.getQueueFb)(H);case 11:o=e.sent;case 12:r=20*n-20,s=20*n,1===n&&(r=0),i=o.slice(r,s).join(""),w.innerHTML=i,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log(e.t0);case 22:e.next=25;break;case 24:o=JSON.parse(localStorage.getItem("watched"))[a],l=20*n-20,d=20*n,1===n&&(l=0),p=o.slice(l,d).join(""),w.innerHTML=p;case 25:case"end":return e.stop()}}),e,null,[[2,19]])})))).apply(this,arguments)}!function(){k.apply(this,arguments)}();var O;O=r("aNJCr").getBundleURL("N9b3R")+r("iE7OH").resolve("kxKJ3");u=r("iNWLi");var F=r("c7C73"),J=r("73G6I"),Z=new(0,F.Api),E=new(0,J.default)(".modal-movie__backdrop",".modal-movie__btn-close"),W=document.querySelector(".modal-movie__container"),C=document.querySelector(".movie-list"),G=localStorage.getItem("id-user"),Q={watched:[],queue:[]};function B(){return(B=t(s)(t(c).mark((function e(){return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=15;break}return e.prev=1,e.next=4,(0,u.getWatchedFb)(G);case 4:return Q.watched=e.sent,e.next=7,(0,u.getQueueFb)(G);case 7:Q.queue=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:e.next=16;break;case 15:localStorage.getItem("watched")?Q=JSON.parse(localStorage.getItem("watched")):localStorage.setItem("watched",JSON.stringify(Q));case 16:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function j(){return(j=t(s)(t(c).mark((function e(a){var n,o,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),"LI"===a.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:return i.Loading.custom("Loading...",{customSvgCode:'<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><linearGradient id="myG"  fy="0" gradientTransform="rotate(60 .5 .5)"><stop offset="0" stop-color="#f15361"></stop><stop offset=".25" stop-color="#ffffff"><animate attributeName="offset" dur="2s" values="0;1;0"repeatCount="indefinite" /></stop><stop offset="1" stop-color="#f15361"/></linearGradient><path d="M0 0V12H16V0H0ZM3 11H1V9H3V11ZM3 7H1V5H3V7ZM3 3H1V1H3V3ZM12 11H4V1H12V11ZM15 11H13V9H15V11ZM15 7H13V5H15V7ZM15 3H13V1H15V3ZM6 3V9L10 6L6 3Z" fill="url(#myG)"/></svg>'}),W.innerHTML=" ",E.openModal(),n=a.target.dataset.id,e.prev=7,e.next=10,Z.fetchCardFilm(n);case 10:return o=e.sent,console.log(o),W.innerHTML=ee(o),A(a),i.Loading.remove(0),e.prev=15,e.next=18,Z.fetchMovies(n);case 18:(r=e.sent).results[0]&&(document.querySelector(".modal-movie__img-container").insertAdjacentHTML("beforeend",ae()),document.querySelector(".modal-movie__movie").addEventListener("click",P(a,r.results[0]))),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(15),console.log(e.t0),console.log("no movie");case 26:e.next=33;break;case 28:e.prev=28,e.t1=e.catch(7),i.Loading.remove(0),console.log(e.t1),W.innerHTML=te(e.t1);case 33:case"end":return e.stop()}}),e,null,[[7,28],[15,22]])})))).apply(this,arguments)}function P(e,a){return t(s)(t(c).mark((function e(){var n,o,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(e){"Escape"===e.code&&o.close()},n={className:"basicLightbox__placeholder--transparent",onShow:function(){window.addEventListener("keydown",r)},onClose:function(){window.removeEventListener("keydown",r),document.querySelector(".basicLightbox__placeholder").classList.remove("basicLightbox__placeholder--transparent")}},(o=l.create(ne(a),n)).show();case 5:case"end":return e.stop()}}),e)})))}function A(e){return R.apply(this,arguments)}function R(){return(R=t(s)(t(c).mark((function e(a){var n,o,r,s,i;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.target.outerHTML,o=document.querySelector(".modal-movie__btn-watched"),r=document.querySelector(".modal-movie__btn-queue"),o.addEventListener("click",U(a,o)),r.addEventListener("click",z(a,r)),s=[],i=[],e.prev=7,!G){e.next=17;break}return e.next=11,(0,u.getWatchedFb)(G);case 11:return s=e.sent,e.next=14,(0,u.getQueueFb)(G);case 14:i=e.sent,e.next=18;break;case 17:s=JSON.parse(localStorage.getItem("watched")).watched,i=JSON.parse(localStorage.getItem("watched")).queue;case 18:D(s,n,o),D(i,n,r),K(o),$(r),e.next=33;break;case 24:e.prev=24,e.t0=e.catch(7),console.log(e.t0),s=JSON.parse(localStorage.getItem("watched")).watched,i=JSON.parse(localStorage.getItem("watched")).queue,D(s,n,o),D(i,n,r),K(o),$(r);case 33:case"end":return e.stop()}}),e,null,[[7,24]])})))).apply(this,arguments)}function U(e,a){return t(s)(t(c).mark((function n(){var o,r,s;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=document.querySelector(".modal-movie__btn-queue"),"false"!==a.dataset.ls){t.next=18;break}if(!G){t.next=15;break}return t.prev=3,t.next=6,(0,u.addToWatchedFb)(G,e.target.outerHTML);case 6:X(a),oe(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:t.next=16;break;case 15:Q.watched.push(e.target.outerHTML),localStorage.setItem("watched",JSON.stringify(Q)),X(a),oe();case 16:t.next=32;break;case 18:if(!G){t.next=31;break}return t.prev=19,t.next=22,(0,u.removeFromWatchedFb)(G,e.target.outerHTML);case 22:Y(a),oe(),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(19),console.log(t.t1);case 29:t.next=32;break;case 31:r=Q.watched.indexOf(e.target.outerHTML),Q.watched.splice(r,1),localStorage.setItem("watched",JSON.stringify(Q)),Y(a),oe();case 32:if(!G){t.next=49;break}return t.prev=33,t.next=36,(0,u.getQueueFb)(G);case 36:if(!t.sent.includes(e.target.outerHTML)){t.next=42;break}return t.next=40,(0,u.removeFromQueueFb)(G,e.target.outerHTML);case 40:Y(o),oe();case 42:t.next=47;break;case 44:t.prev=44,t.t2=t.catch(33),console.log(t.t2);case 47:t.next=50;break;case 49:JSON.parse(localStorage.getItem("watched")).queue.includes(e.target.outerHTML)&&(s=Q.queue.indexOf(e.target.outerHTML),Q.queue.splice(s,1),localStorage.setItem("watched",JSON.stringify(Q)),Y(o),oe());case 50:K(a),o.innerHTML="add to Queue";case 52:case"end":return t.stop()}}),n,null,[[3,10],[19,26],[33,44]])})))}function z(e,a){return t(s)(t(c).mark((function n(){var o,r,s;return t(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=document.querySelector(".modal-movie__btn-watched"),"false"!==a.dataset.ls){t.next=19;break}if(!G){t.next=16;break}return t.prev=4,t.next=7,(0,u.addToQueueFb)(G,e.target.outerHTML);case 7:X(a),oe(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),console.log(t.t0);case 14:t.next=17;break;case 16:Q.queue.push(e.target.outerHTML),localStorage.setItem("watched",JSON.stringify(Q)),X(a),oe();case 17:t.next=33;break;case 19:if(!G){t.next=32;break}return t.prev=20,t.next=23,(0,u.removeFromQueueFb)(G,e.target.outerHTML);case 23:Y(a),oe(),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(20),console.log(t.t1);case 30:t.next=33;break;case 32:r=Q.queue.indexOf(e.target.outerHTML),Q.queue.splice(r,1),localStorage.setItem("watched",JSON.stringify(Q)),Y(a),oe();case 33:if(!G){t.next=50;break}return t.prev=34,t.next=37,(0,u.getWatchedFb)(G);case 37:if(!t.sent.includes(e.target.outerHTML)){t.next=43;break}return t.next=41,(0,u.removeFromWatchedFb)(G,e.target.outerHTML);case 41:Y(o),oe();case 43:t.next=48;break;case 45:t.prev=45,t.t2=t.catch(34),console.log(t.t2);case 48:t.next=51;break;case 50:JSON.parse(localStorage.getItem("watched")).watched.includes(e.target.outerHTML)&&(s=Q.watched.indexOf(e.target.outerHTML),Q.watched.splice(s,1),localStorage.setItem("watched",JSON.stringify(Q)),Y(o),oe());case 51:$(a),o.innerHTML="add to Watched",t.next=57;break;case 55:t.prev=55,t.t3=t.catch(0);case 57:case"end":return t.stop()}}),n,null,[[0,55],[4,11],[20,27],[34,45]])})))}function D(e,t,a){e.includes(t)?X(a):Y(a)}function X(e){e.classList.add("modal-movie__btn--curent"),e.dataset.ls="true"}function Y(e){e.classList.remove("modal-movie__btn--curent"),e.dataset.ls="false"}function K(e){"false"===e.dataset.ls?e.innerHTML="add to Watched":e.innerHTML="remove from Watched"}function $(e){"false"===e.dataset.ls?e.innerHTML="add to Queue":e.innerHTML="remove from Queue"}function ee(e){var t=[];return e.genres.length&&e.genres.map((function(e){t.push(e.name)})),'\n  <div class="modal-movie__img-container">\n  <img class="modal-movie__img" loading="lazy" src="'.concat(e.poster_path?"https://image.tmdb.org/t/p/w500"+e.poster_path:"https://i.postimg.cc/6pzyh7Wc/pngwing-com.png",'" alt="').concat(e.original_title||e.original_name,'" width="240" height="357" />\n  ').concat(e.production_companies.length?e.production_companies[0].logo_path?' <img class="modal-movie__img-company" loading="lazy" src="'.concat(e.production_companies[0].logo_path?"https://image.tmdb.org/t/p/w500"+e.production_companies[0].logo_path:"-",'" alt="').concat(e.production_companies[0].name||"logo company",'" width="240" height="357" />'):"":" ",'\n  \n  </div>\n    \n    <div>\n      <h1 class="modal-movie__title">').concat(e.original_title||e.original_name?e.original_title||e.original_name:"-",'</h1>\n      <ul class="modal-movie__list">\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Vote / Votes</p>\n          <p class="modal-movie__item-inf">\n            <span class="modal-movie__item-vote">').concat(e.vote_average,'</span> /\n            <span class="modal-movie__item-votes">').concat(e.vote_count,'</span>\n          </p>\n        </li>\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Popularity</p>\n          <p class="modal-movie__item-inf">').concat(e.popularity,'</p>\n        </li>\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Original Title </p>\n          <p class="modal-movie__item-inf modal-movie__item-inf--uppercase">\n            ').concat(e.original_title,'\n          </p>\n        </li>\n        <li class="modal-movie__item">\n          <p class="modal-movie__item-categories">Genre</p>\n          <p class="modal-movie__item-inf">').concat(t.length>0?t.join(", "):"-",'</p>\n        </li>\n      </ul>\n      <h2 class="modal-movie__about">About</h2>\n      <p class="modal-movie__about-text">\n        ').concat(e.overview.length>0?e.overview:"Absent...",'\n      </p>\n      <div class="modal-movie__btn-section">\n        <button\n            class="modal-movie__btn modal-movie__btn--margin modal-movie__btn-watched"\n            type="button" data-ls=\'false\'\n          >\n            add to Watched\n          </button>\n          <button class="modal-movie__btn modal-movie__btn-queue" type="button" data-ls=\'false\'>add to queue</button>\n      </div>\n    </div>\n      ')}function te(e){return'\n    <div class="error-message">\n    <h1>'.concat(e.response.status,"</h1>\n    <h2>").concat(e.name,"</h2>\n    <h3>").concat(e.message,"</h3>\n<p>try later</p>\n    </div>\n    \n      ")}function ae(){return'\n      <button type="button" class="modal-movie__movie">\n      <svg class="icon modal-movie__icon" width="40" height="40">\n      <use xlink:href="'.concat(t(O),'#icon-youtube"></use>\n      </svg>\n    </button>  \n      ')}function ne(e){return'\n  <div class=\'movie-iframe\'>\n<iframe frameborder="0" allowfullscreen="1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" title="'.concat(e.name,'" width="100%" height="100%" src="https://www.youtube.com/embed/').concat(e.key,'"></iframe>\n  </div>\n  ')}function oe(){var e=document.querySelector(".button-watched"),t=document.querySelector(".button-queue");"true"===e.dataset.active&&M(),"true"===t.dataset.active&&V()}!function(){B.apply(this,arguments)}(),C.addEventListener("click",(function(e){return j.apply(this,arguments)})),r("puS1k");s=r("bpxeT"),c=r("2TvXO"),p=r("4Nugj"),J=r("73G6I"),u=r("iNWLi");var re,se=r("iU1Pc"),ce=(se=r("iU1Pc"),new(0,J.default)(".wrapper-modal-user",".modal-user__btn-close")),ie=localStorage.getItem("email-user");ie&&(p.refs.loginBtn.innerHTML=ie),null===(re=p.refs.loginBtn)||void 0===re||re.addEventListener("click",(function(){return me.apply(this,arguments)}));var le=document.querySelector(".modal-register");function ue(){return(ue=t(s)(t(c).mark((function e(a){var n,o,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n={email:a.currentTarget["email-reg"].value,password:a.currentTarget["password-reg"].value},"btn-auth"!==(o=a.path[0].name)){e.next=18;break}return e.prev=4,e.next=7,(0,u.singInAccount)(n.email,n.password);case 7:pe(e.sent.user.uid,n.email),se.Notify.success("Welcome back!"),setTimeout((function(){location.reload()}),1e3),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0);case 16:e.next=32;break;case 18:if("btn-reg"!==o){e.next=32;break}return e.prev=19,e.next=22,(0,u.createUser)(n.email,n.password);case 22:pe((r=e.sent).user.uid,n.email),(0,u.createNewUser)({id:r.user.uid,email:n.email}),se.Notify.success("Succes! Your email: ".concat(n.email)),setTimeout((function(){location.reload()}),1e3),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(19),console.log(e.t1);case 32:case"end":return e.stop()}}),e,null,[[4,13],[19,29]])})))).apply(this,arguments)}null==le||le.addEventListener("click",(function(e){return ue.apply(this,arguments)}));var de=document.querySelector(".sign-out__button");function pe(e,t){localStorage.setItem("id-user",e),localStorage.setItem("email-user",t),p.refs.loginBtn.innerHTML=t,ce.modal.classList.add("is-hidden"),document.body.classList.remove("body--hidden")}function me(){return(me=t(s)(t(c).mark((function e(){var a,n,o,r;return t(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={wrap:document.querySelector(".sign-out__wrap"),register:document.querySelector(".modal-register"),email:document.querySelector(".account-info__email"),watched:document.querySelector(".account-info__count-watched"),queue:document.querySelector(".account-info__count-queue")},!(n=localStorage.getItem("email-user"))){e.next=23;break}return o=localStorage.getItem("id-user"),e.prev=4,se.Loading.custom("Loading...",{customSvgCode:'<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><linearGradient id="myG"  fy="0" gradientTransform="rotate(60 .5 .5)"><stop offset="0" stop-color="#f15361"></stop><stop offset=".25" stop-color="#ffffff"><animate attributeName="offset" dur="2s" values="0;1;0"repeatCount="indefinite" /></stop><stop offset="1" stop-color="#f15361"/></linearGradient><path d="M0 0V12H16V0H0ZM3 11H1V9H3V11ZM3 7H1V5H3V7ZM3 3H1V1H3V3ZM12 11H4V1H12V11ZM15 11H13V9H15V11ZM15 7H13V5H15V7ZM15 3H13V1H15V3ZM6 3V9L10 6L6 3Z" fill="url(#myG)"/></svg>',backgroundColor:"rgba(0, 0, 0, 0.8)"}),e.next=8,(0,u.getUserInfo)(o);case 8:r=e.sent,se.Loading.remove(100),ce.openModal(),a.wrap.classList.remove("visually-hidden"),a.register.classList.add("visually-hidden"),a.email.innerHTML="Your email: <b>".concat(n,"</b>"),a.watched.innerHTML="You watched: <b>".concat(r.watched.length,"</b> films!"),a.queue.innerHTML="You added to queue: <b>".concat(r.queue.length,"</b> films!"),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0);case 21:e.next=24;break;case 23:ce.openModal();case 24:case"end":return e.stop()}}),e,null,[[4,18]])})))).apply(this,arguments)}null==de||de.addEventListener("click",(function(e){localStorage.removeItem("id-user"),localStorage.removeItem("email-user"),location.reload()}))}();
//# sourceMappingURL=lib.e95ef4fb.js.map
